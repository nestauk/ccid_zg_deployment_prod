(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{83686:function(e,i,t){Promise.resolve().then(t.bind(t,5550))},5550:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return _}});var n=t(57437),s=t(94547),l=t(2265),o=t(60182),d=t(4766),r=t(93191),c=t(31193),a=t(58433),u=t(15785),x=t(76548),f=t(69065),h=t(66124),v=t(60335),j=t(80511),m=t(7630);function p(){let[e,i]=(0,l.useState)(!1),t=()=>{i(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>{i(!0)},children:"LEAVE CALL"}),(0,n.jsx)(f.Z,{fullWidth:!0,maxWidth:"sm",open:e,onClose:t,children:(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(c.Z,{style:{position:"absolute",top:0,right:0},children:(0,n.jsx)(v.Z,{"aria-label":"close",onClick:t,children:(0,n.jsx)(m.Z,{})})}),(0,n.jsxs)(c.Z,{sx:{p:2},display:"flex",flexDirection:"column",alignItems:"center",children:[(0,n.jsx)(j.Z,{variant:"h4",sx:{width:"75%"},style:{textAlign:"center"},children:"Are you sure you want to leave the call?"}),(0,n.jsx)(x.Z,{sx:{mt:4,width:"66%"},variant:"contained",color:"buttonStandard",onClick:()=>{i(!1)},children:"RETURN TO THE CALL"}),(0,n.jsx)(x.Z,{sx:{mt:2,width:"66%"},variant:"outlined",color:"buttonStandard",onClick:()=>{i(!1),window.location.reload()},children:"LEAVE THE CALL"})]})]})})]})}var g=t(6722),w=t(8963),Z=t(31164),C=t(5085),b=t(70883),S=t(68276),D=t(64463);function y(e){let i=(0,g.HI)(),t=(0,g.Onx)(),s=(0,g.ULf)(),o=(0,g.m6Y)(),d=(0,g.fjl)(),[r,c]=(0,l.useState)(t.isVideoEnabled),[a,u]=(0,l.useState)(!i.muted),[x,f]=(0,l.useState)(void 0),[h,v]=(0,l.useState)(void 0),[j,m]=(0,l.useState)([]),[p,Z]=(0,l.useState)([]),[C,b]=(0,l.useState)(!1);(0,l.useEffect)(()=>{d.subscribeToMeetingStatus(e=>{if(e===g.ytK.Succeeded){var n,s;null===(n=d.audioVideo)||void 0===n||n.listVideoInputDevices().then(e=>{m(e),f(e.find(e=>e.deviceId===d.selectedVideoInputDevice))}),null===(s=d.audioVideo)||void 0===s||s.listAudioInputDevices().then(e=>{Z(e),v(e.find(e=>e.deviceId===d.selectedAudioInputDevice))}),c(t.isVideoEnabled),u(!i.muted),d.subscribeToSelectedAudioInputDevice(S),d.subscribeToSelectedVideoInputDevice(y)}})},[]);let S=e=>{(0,g.Zws)(e).then(e=>{v(p.find(i=>i.deviceId===e))})},y=e=>{(0,g.Zws)(e).then(e=>{f(j.find(i=>i.deviceId===e))})};(0,l.useEffect)(()=>{c(t.isVideoEnabled)},[t.isVideoEnabled]),(0,l.useEffect)(()=>{u(!i.muted)},[i.muted]);let I=async(e,i)=>{try{var n;let l=null!==(n=null==i?void 0:i.deviceId)&&void 0!==n?n:await (0,g.Zws)(s.selectedDevice);if((0,w.isVideoTransformDevice)(s.selectedDevice)){if(b(!0),"chooseNewInnerDevice"in s.selectedDevice)l=selectedDevice.chooseNewInnerDevice(deviceId);else throw"Transform device cannot choose new inner device"}t.isVideoEnabled?await d.startVideoInputDevice(l):d.selectVideoInputDevice(l),e!==t.isVideoEnabled&&t.toggleVideo()}catch(e){console.error("Failed to select video input device")}finally{b(!1)}},E=async(e,t)=>{var n;let s=await (0,g.Zws)(o.selectedDevice),l=null!==(n=null==t?void 0:t.deviceId)&&void 0!==n?n:s;l!==s&&await d.startAudioInputDevice(l),i.muted===e&&i.toggleMute()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(D.Z,{direction:e.orientation,videoEnabled:r,audioEnabled:a,videoDevice:x,audioDevice:h,videoDevices:j,audioDevices:p,onVideoPreferenceChange:I,onAudioPreferenceChange:E,busy:C})})}var I=t(75511),E=t(97340),V=t(28801),A=t(37570);let k={[u.S.default]:4,[u.S.deliberation]:8},L={[u.S.default]:0,[u.S.deliberation]:1};function T(){var e;let i=(0,l.useContext)(C.rZ),t=(0,l.useContext)(A.H),u=(0,l.useContext)(o.d),x=(0,l.useContext)(d.X),f=(0,l.useContext)(b.l),h=(0,l.useContext)(r.N),v=(0,l.useContext)(S.u),j=new w.ConsoleLogger("Zeitgeist meeting",w.LogLevel.OFF),m=t.session.remoteConfiguration===s.VS.RemoteWithVideoCall,D=m?k[x.data.activity]:0,T=m?12-D:12,N=L[x.data.activity],F=m&&0===N,P=m&&1===N;(0,l.useEffect)(()=>{I.Z.emit({type:I.z.Request_SlideRefresh})},[D]);let _=(0,l.useMemo)(()=>function(e){let{showMeeting:i,children:t}=e;return(0,n.jsxs)(n.Fragment,{children:[!i&&t,i&&(0,n.jsx)(g.ikO,{logger:j,children:(0,n.jsx)(g.BAg,{children:(0,n.jsx)(g.lUb,{children:t})})})]})},[m]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(_,{showMeeting:m,children:[(0,n.jsx)(c.Z,{display:"flex",flexDirection:"column",justifyItems:"flex-start",sx:{width:"100vw",height:"100vh",p:2},children:(0,n.jsxs)(a.ZP,{container:!0,spacing:2,flexGrow:1,children:[m&&(0,n.jsxs)(a.ZP,{item:!0,xs:D,display:"flex",flexDirection:"column",children:[(0,n.jsx)(E.Z,{sx:{flexGrow:1},children:(0,n.jsx)(Z.Z,{role:i.role,facilitationState:u.facilitationState,sid:t.sid,sessionToken:i.sessionToken,participantId:i.deviceId,participantName:null===(e=f.thisUser)||void 0===e?void 0:e.participantName,initialCallPreferences:v.call,style:{flexGrow:1,flexShrink:1}})}),F&&(0,n.jsx)(c.Z,{alignSelf:"center",sx:{mt:2},children:(0,n.jsx)(y,{orientation:"row"})})]}),(0,n.jsxs)(a.ZP,{item:!0,xs:T,display:"flex",flexDirection:"column",children:[m&&(0,n.jsx)(E.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:h.presentation}),!m&&h.presentation,P&&(0,n.jsx)(c.Z,{flexGrow:1,alignSelf:"stretch",display:"flex",flexDirection:"column",justifyContent:"flex-end",sx:{mt:2},children:(0,n.jsxs)(c.Z,{alignSelf:"stretch",display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,n.jsx)(y,{orientation:"row"}),(0,n.jsx)(c.Z,{alignSelf:"stretch",alignContent:"center",children:(0,n.jsx)(p,{})})]})})]})]})}),(0,n.jsx)(c.Z,{sx:{position:"fixed",left:4,bottom:4},children:(0,n.jsx)(V.Z,{})})]})})}var N=t(82297);function F(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(N.Z,{sid:e.sid,joinCode:e.joinCode,refresh:e.refresh,role:s._b.Client,children:(0,n.jsx)(T,{})})})}var P=t(16463);function _(){let e=(0,P.useSearchParams)(),i=e.get("sid"),t=e.get("code"),s="true"===e.get("refresh");return null===i||null===t?(0,n.jsx)("p",{children:"Missing session id or join code"}):(0,n.jsx)(F,{sid:i,joinCode:t,refresh:s})}}},function(e){e.O(0,[827,908,444,866,221,292,403,559,858,181,453,164,13,108,971,23,744],function(){return e(e.s=83686)}),_N_E=e.O()}]);
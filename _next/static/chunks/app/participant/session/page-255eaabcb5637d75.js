(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{83686:function(e,i,t){Promise.resolve().then(t.bind(t,5550))},5550:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return O}});var n=t(57437),s=t(94547),l=t(78364),o=t(2265),d=t(60182),r=t(4766),c=t(93191),a=t(31193),u=t(58433),x=t(15785),f=t(96537),h=t(69065),v=t(66124),j=t(60335),m=t(80511),p=t(7630);function g(){let[e,i]=(0,o.useState)(!1),t=()=>{i(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>{i(!0)},children:"LEAVE CALL"}),(0,n.jsx)(h.Z,{fullWidth:!0,maxWidth:"sm",open:e,onClose:t,children:(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(a.Z,{style:{position:"absolute",top:0,right:0},children:(0,n.jsx)(j.Z,{"aria-label":"close",onClick:t,children:(0,n.jsx)(p.Z,{})})}),(0,n.jsxs)(a.Z,{sx:{p:2},display:"flex",flexDirection:"column",alignItems:"center",children:[(0,n.jsx)(m.Z,{variant:"h4",sx:{width:"75%"},style:{textAlign:"center"},children:"Are you sure you want to leave the call?"}),(0,n.jsx)(f.Z,{sx:{mt:4,width:"66%"},variant:"contained",color:"buttonStandard",onClick:()=>{i(!1)},children:"RETURN TO THE CALL"}),(0,n.jsx)(f.Z,{sx:{mt:2,width:"66%"},variant:"outlined",color:"buttonStandard",onClick:()=>{i(!1),window.location.reload()},children:"LEAVE THE CALL"})]})]})})]})}var w=t(6722),Z=t(8963),C=t(31164),b=t(5085),S=t(70883),D=t(68276),y=t(64463);function I(e){let i=(0,w.HI)(),t=(0,w.Onx)(),s=(0,w.ULf)(),l=(0,w.m6Y)(),d=(0,w.fjl)(),[r,c]=(0,o.useState)(t.isVideoEnabled),[a,u]=(0,o.useState)(!i.muted),[x,f]=(0,o.useState)(void 0),[h,v]=(0,o.useState)(void 0),[j,m]=(0,o.useState)([]),[p,g]=(0,o.useState)([]),[C,b]=(0,o.useState)(!1);(0,o.useEffect)(()=>{d.subscribeToMeetingStatus(e=>{if(e===w.ytK.Succeeded){var n,s;null===(n=d.audioVideo)||void 0===n||n.listVideoInputDevices().then(e=>{m(e),f(e.find(e=>e.deviceId===d.selectedVideoInputDevice))}),null===(s=d.audioVideo)||void 0===s||s.listAudioInputDevices().then(e=>{g(e),v(e.find(e=>e.deviceId===d.selectedAudioInputDevice))}),c(t.isVideoEnabled),u(!i.muted),d.subscribeToSelectedAudioInputDevice(S),d.subscribeToSelectedVideoInputDevice(D)}})},[]);let S=e=>{(0,w.Zws)(e).then(e=>{v(p.find(i=>i.deviceId===e))})},D=e=>{(0,w.Zws)(e).then(e=>{f(j.find(i=>i.deviceId===e))})};(0,o.useEffect)(()=>{c(t.isVideoEnabled)},[t.isVideoEnabled]),(0,o.useEffect)(()=>{u(!i.muted)},[i.muted]);let I=async(e,i)=>{try{var n;let l=null!==(n=null==i?void 0:i.deviceId)&&void 0!==n?n:await (0,w.Zws)(s.selectedDevice);if((0,Z.isVideoTransformDevice)(s.selectedDevice)){if(b(!0),"chooseNewInnerDevice"in s.selectedDevice)l=selectedDevice.chooseNewInnerDevice(deviceId);else throw"Transform device cannot choose new inner device"}t.isVideoEnabled?await d.startVideoInputDevice(l):d.selectVideoInputDevice(l),e!==t.isVideoEnabled&&t.toggleVideo()}catch(e){console.error("Failed to select video input device")}finally{b(!1)}},E=async(e,t)=>{var n;let s=await (0,w.Zws)(l.selectedDevice),o=null!==(n=null==t?void 0:t.deviceId)&&void 0!==n?n:s;o!==s&&await d.startAudioInputDevice(o),i.muted===e&&i.toggleMute()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(y.Z,{direction:e.orientation,videoEnabled:r,audioEnabled:a,videoDevice:x,audioDevice:h,videoDevices:j,audioDevices:p,onVideoPreferenceChange:I,onAudioPreferenceChange:E,busy:C})})}var E=t(75511),V=t(97340),A=t(28801),k=t(37570);let L={[x.S.default]:4,[x.S.deliberation]:8},T={[x.S.default]:0,[x.S.deliberation]:1};function N(){var e;let i=(0,o.useContext)(b.rZ),t=(0,o.useContext)(k.H),l=(0,o.useContext)(d.d),x=(0,o.useContext)(r.X),f=(0,o.useContext)(S.l),h=(0,o.useContext)(c.N),v=(0,o.useContext)(D.u),j=new Z.ConsoleLogger("Zeitgeist meeting",Z.LogLevel.OFF),m=t.session.remoteConfiguration===s.VS.RemoteWithVideoCall,p=m?L[x.data.activity]:0,y=m?12-p:12,N=T[x.data.activity],F=m&&0===N,P=m&&1===N;(0,o.useEffect)(()=>{E.Z.emit({type:E.z.Request_SlideRefresh})},[p]);let _=(0,o.useMemo)(()=>function(e){let{showMeeting:i,children:t}=e;return(0,n.jsxs)(n.Fragment,{children:[!i&&t,i&&(0,n.jsx)(w.ikO,{logger:j,children:(0,n.jsx)(w.BAg,{children:(0,n.jsx)(w.lUb,{children:t})})})]})},[m]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(_,{showMeeting:m,children:[(0,n.jsx)(a.Z,{display:"flex",flexDirection:"column",justifyItems:"flex-start",sx:{width:"100vw",height:"100vh",p:2},children:(0,n.jsxs)(u.ZP,{container:!0,spacing:2,flexGrow:1,children:[m&&(0,n.jsxs)(u.ZP,{item:!0,xs:p,display:"flex",flexDirection:"column",children:[(0,n.jsx)(V.Z,{sx:{flexGrow:1},children:(0,n.jsx)(C.Z,{role:i.role,facilitationState:l.facilitationState,sid:t.sid,sessionToken:i.sessionToken,participantId:i.deviceId,participantName:null===(e=f.thisUser)||void 0===e?void 0:e.participantName,initialCallPreferences:v.call,style:{flexGrow:1,flexShrink:1}})}),F&&(0,n.jsx)(a.Z,{alignSelf:"center",sx:{mt:2},children:(0,n.jsx)(I,{orientation:"row"})})]}),(0,n.jsxs)(u.ZP,{item:!0,xs:y,display:"flex",flexDirection:"column",children:[m&&(0,n.jsx)(V.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:h.presentation}),!m&&h.presentation,P&&(0,n.jsx)(a.Z,{flexGrow:1,alignSelf:"stretch",display:"flex",flexDirection:"column",justifyContent:"flex-end",sx:{mt:2},children:(0,n.jsxs)(a.Z,{alignSelf:"stretch",display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,n.jsx)(I,{orientation:"row"}),(0,n.jsx)(a.Z,{alignSelf:"stretch",alignContent:"center",children:(0,n.jsx)(g,{})})]})})]})]})}),(0,n.jsx)(a.Z,{sx:{position:"fixed",left:4,bottom:4},children:(0,n.jsx)(A.Z,{})})]})})}var F=t(82297);function P(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(F.Z,{sid:e.sid,joinCode:e.joinCode,refresh:e.refresh,role:s._b.Client,children:[(0,n.jsx)(l.Z,{}),(0,n.jsx)(N,{})]})})}var _=t(16463);function O(){let e=(0,_.useSearchParams)(),i=e.get("sid"),t=e.get("code"),s="true"===e.get("refresh");return null===i||null===t?(0,n.jsx)("p",{children:"Missing session id or join code"}):(0,n.jsx)(P,{sid:i,joinCode:t,refresh:s})}}},function(e){e.O(0,[827,908,444,866,221,732,887,403,930,181,266,29,13,965,971,23,744],function(){return e(e.s=83686)}),_N_E=e.O()}]);